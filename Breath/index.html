<head>
    <link rel="stylesheet" href="Breathe.css">
    <link rel="stylesheet" href="lib/myLayoutLib.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

    <meta name="theme-color" content="#f5f5f5" />

    <link rel="icon" type="image/x-icon" href="Breath.ico">
    <!-- ƒê·∫∑t t√™n ·ª©ng d·ª•ng khi th√™m v√†o m√†n h√¨nh ch√≠nh -->
    <meta name="apple-mobile-web-app-title" content="Your App Name">
    <!-- ƒê·∫∑t bi·ªÉu t∆∞·ª£ng ·ª©ng d·ª•ng cho iOS -->
    <link rel="apple-touch-icon" href="Breath.ico">
    <!-- B·∫≠t ch·∫ø ƒë·ªô ·ª©ng d·ª•ng web to√†n m√†n h√¨nh cho iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <!-- ƒê·∫∑t m√†u thanh tr·∫°ng th√°i cho iOS -->
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="manifest" href="manifest.json">
    <title>Breath</title>
</head>

<!-- <script>
    // Function to open the popup
    function openPopup() {
        document.getElementById("popup").style.visibility = "visible";
    }

    // Function to close the popup
    function closePopup() {
        document.getElementById("popup").style.visibility = "hidden";
    }

    // Automatically open the popup when the page loads
    window.onload = function() {
        openPopup();
    }
</script> -->
<!-- <div class="">wizard h∆∞·ªõng d·∫´n s·ª≠ d·ª•ng app (·∫•n gi·ªØ ƒë·ªÉ d·ª´ng)</div> -->
<div class="box linear-layout fl-dr-row inside-margin-h" style="display: none;">c√°i n√†y ƒë∆∞·ª£c d√πng nh∆∞ l√† m·ªôt snipet
</div>
<div class="m·ªü nh·∫°c v√† d√πng h·ªânh tr√≤n ·ªü trung t√¢m thay cho spectrum"></div>
<div class="popup" id="popup">
    <div class="popup-content">
        <iframe style="width: 100%; aspect-ratio: 16/9;" src="https://www.youtube.com/embed/j8fDJ04ipOw?t=54"
            title="Ch√∫ng ta th·ªü nh∆∞ th·∫ø n√†o?" frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
        <h1>Breath - Luy·ªán t·∫≠p H∆°i Th·ªü</h1>
        <h2>1. S·ª©c kh·ªèe v√† cu·ªôc s·ªëng</h2>
        <p>Cu·ªôc s·ªëng hi·ªán ƒë·∫°i khi·∫øn ta th∆∞·ªùng b·ªè qu√™n s·ª©c kh·ªèe.</p>
        <h2>2. K·ªπ thu·∫≠t th·ªü v√† l·ª£i √≠ch</h2>
        <p>C√°c k·ªπ thu·∫≠t th·ªü gi√∫p ƒëi·ªÅu ch·ªânh c·∫£m x√∫c, th∆∞ gi√£n, d·ªÖ ng·ªß, t·∫≠p trung v√† gi·∫£m suy nghƒ© ti√™u c·ª±c.</p>
        <h2>3. H∆∞·ªõng d·∫´n luy·ªán t·∫≠p</h2>
        <p>·ª®ng d·ª•ng h∆∞·ªõng d·∫´n b·∫°n luy·ªán t·∫≠p th·ªü, bi·∫øn th·ªü th√†nh m·ªôt <b>ho·∫°t ƒë·ªông thi·ªÅn</b> ho·∫∑c yoga b·ªï √≠ch.</p>
        <p>Cu·ªëi c√πng n·∫øu g·∫∑p v·∫•n kh√≥ khƒÉn trong vi·ªác th·ªü th√¨ h√£y k·∫øt h·ª£p v·ªõi mi·ªáng n·ªØa nh√© üòÆ‚Äçüí®</p>
        <button class="close-btn" onclick="closePopup()">ƒê√≥ng</button>
        <button class="close-btn" onclick="closePopup(); /*StopRemind()*/">ƒê·ª´ng n√≥i n·ªØaaaaaaa</button>
    </div>
</div>
<!-- <button class="btnToggleFullscreen" onclick="toggleFullscreen()">Toggle Fullscreen</button> -->
<button style="padding: 8px;" onclick="ResetState()"> <- </button>

        <div class="linear-layout fl-dr-col">
            <div class="beater pos-rl">
                <div class="breath-anim inner-round pos-ab"></div>
                <div class="outer-round pos-ab"></div>
            </div>
            <div id="txtIndicator"
                style="margin: 2%; font-size: large; font-family: Georgia, 'Times New Roman', Times, serif; font-weight: 600; color: #606060;">
                Drink some water and stay focus
            </div>
        </div>

        <div id="buttons" class="linear-layout fl-dr-row inside-margin-h">
            <button
                onclick="Breath2(boxBreathingPreset[0], boxBreathingPreset[1], boxBreathingPreset[2], boxBreathingPreset[3],3)">Box
                Breathing</button>
            <button
                onclick="EqualBreath(equalDuration, equalDuration, parseInt(prompt('Enter number of repeation', 5)))">Equal
                Breathing</button>
            <button
                onclick="Excercise(numbericPreset[0], numbericPreset[1], numbericPreset[2], numbericPreset[3])">Strengh
                Excercise</button>
        </div>
        <button style="padding: 8px; margin: auto;display: block; " onclick="ResetState()"> > Stop </button>



        <!-- <div class="drawer">
    <div class="back-icon"></div>
    <div id="settings"></div>
    #
</div> -->


        <script src="lib/gsap.min.js"></script>
        <!-- <script src="fullscreen.js"></script> -->
        <!-- <script src="sw.js"></script> -->
        <!-- <script src="installPageAsApp.js"></script> -->
        <script>
            // let language = json.Stringify
            let lightColor = '#57d8ff';
            let strenghColor = "#ff8457"
            let equalDuration = 2.7;
            let txtIndicator = document.getElementById('txtIndicator');
            //let repeat = 15;


            let buttons = document.getElementById("buttons");
            let presetBoxBreathing = ["Breath in", "Hold", "Breathe Out", "Hold"];
            let presetExcercise = ["Breath in", "Breathe Out", "Hold", "Hold", "Hold", "Hold"]; //t·∫≠p c∆° ho√†nh 
            let strength = 16;
            let numbericPreset = [3 - 0.4, 0.4, 3, 600];
            let boxBreathingPreset = [3, 3, 3, 3, 5];
            let ease = "power2.inOut";
            let defaultAnimWidth = "30%";
            let fullAnimWidth = "100%";
            let animHeight = "20vh";

            let tl = gsap.timeline();

            let interval;

            // count > 7? alert("Your lung capacity is improved!"): alert("Keep it up!")

            function ResetState() {
                if (interval) {
                    clearInterval(interval);
                }

                tl.kill();
                // gsap.set(".breath-anim", {clearProps: true})

                gsap.to(".breath-anim", {
                    width: defaultAnimWidth,
                    'background-color': lightColor, // Ph·∫£i chuy·ªÉn v·ªÅ m√†u cho ph√π h·ª£p v·ªõi t√¨nh tr·∫°ng s·ª©c kh·ªèe hi·ªán t·∫°i d·ª±a tr√™n bi·∫øn strength
                    ease: "power.Out",
                    duration: 0.7
                })
                txtIndicator.innerHTML = "Well done!";
                buttons.style.display = "flex";
            }


            // function Breath(repeat, duration) {
            //     tl = gsap.timeline({ repeat: repeat });
            //     tl.to(".breath-anim", {
            //         'background-color': lightColor,
            //         width: fullAnimWidth,
            //         ease: "power1.inOut",
            //         yoyo: true,
            //         repeat: repeat, // repeat: 4;s·∫Ω l·∫∑p 5 l·∫ßn (1 l·∫ßn ƒë·∫ßu v√† 4 l·∫ßn l·∫∑p l·∫°i
            //         duration: duration,
            //         onRepeat: () => {
            //             txtIndicator.innerHTML !== "Breath out" ? txtIndicator.innerHTML = "Breath out" : txtIndicator.innerHTML = "Breath in";
            //         },
            //         onComplete: () => {
            //             txtIndicator.innerHTML = "Well done";
            //         }
            //     })
            // }

            function EqualBreath(breathIn, breathOut, repeat) {
                buttons.style.display = "none";
                if (strength < 8) {
                    return alert('S·ª©c kh·ªèe c·ªßa b·∫°n kh√¥ng ƒë·ªß ƒë·ªÉ th·ª±c hi·ªán b√†i t·∫≠p n√†y, n·∫øu b·∫°n ƒë√£ kh·ªèe r·ªìi th√¨ h√£y th·ª±c hi·ªán l·∫°i b√†i test s·ª©c kh·ªèe nh√©!');
                }
                ease = "power2.inOut";
                tl = gsap.timeline({
                    repeat: repeat,
                    onComplete: () => {
                        buttons.style.display = "flex";
                    }
                }); tl.to(".breath-anim", {
                    duration: 0,
                    onComplete: () => {
                        txtIndicator.innerHTML = "Breath in";
                    }
                })
                    .to(".breath-anim", {
                        width: fullAnimWidth,
                        ease: ease,
                        duration: breathIn,
                        onComplete: () => {
                            txtIndicator.innerHTML = "Breath Out";
                        }
                    })
                    .to(".breath-anim", {
                        width: defaultAnimWidth,
                        ease: ease,
                        duration: breathOut,
                        onComplete: () => {
                            txtIndicator.innerHTML = "Well Done";
                        }
                    })
            }

            function Breath2(breathIn, Hold, breathOut, Hold2, repeat) {
                buttons.style.display = "none";
                tl = gsap.timeline({
                    repeat: repeat,
                    onComplete: () => {
                        buttons.style.display = "flex";
                    }
                });
                tl.to(".breath-anim", {
                    duration: 0,
                    onComplete: () => {
                        txtIndicator.innerHTML = "Breath in";
                    }
                })
                    .to(".breath-anim", {
                        width: fullAnimWidth,
                        ease: ease,
                        duration: breathIn,
                        onComplete: () => {
                            txtIndicator.innerHTML = "Hold";
                        }
                    })
                    .to(".breath-anim", {
                        'background-color': strenghColor,
                        // ease: ease,
                        duration: Hold,
                        onComplete: () => {
                            txtIndicator.innerHTML = "Breath Out";
                        }
                    })
                    .to(".breath-anim", {
                        width: defaultAnimWidth,
                        ease: ease,
                        duration: breathOut,
                        onComplete: () => {
                            txtIndicator.innerHTML = "Hold";
                        }
                    })
                    .to(".breath-anim", {
                        'background-color': lightColor,
                        // ease: ease,
                        yoyo: true,
                        duration: Hold2,
                        onComplete: () => {
                            txtIndicator.innerHTML = "Well Done";
                        }
                    })
            }

            function Excercise(breathIn, Hold, breathOut, Hold2, repeat) {
                buttons.style.display = "none";
                tl = gsap.timeline({
                    repeat: repeat,
                    // onComplete: () => {
                    //     buttons.style.display = "flex";
                    // }
                });
                ease = "power2.inOut";
                tl.to(".breath-anim", {
                    duration: 0,
                    onComplete: () => {
                        txtIndicator.innerHTML = "Breath in";
                    }
                })
                    .to(".breath-anim", {
                        width: fullAnimWidth,
                        ease: ease,
                        duration: breathIn,
                        onComplete: () => {
                        }
                    })
                    .to(".breath-anim", {
                        'background-color': strenghColor,
                        // ease: ease,
                        duration: Hold,
                        onComplete: () => {
                            txtIndicator.innerHTML = "Breath Out"
                        }
                    })
                    .to(".breath-anim", {
                        width: defaultAnimWidth,
                        ease: ease,
                        duration: breathOut,
                        onComplete: () => {
                            let count = 0;
                            interval = setInterval(() => {
                                txtIndicator.innerHTML = `Hold ${count += 1}s`;
                                strength = count;
                                boxBreathingPreset[0] = ((strength / 16) * 3.34);
                                boxBreathingPreset[1] = ((strength / 16) * 3.34);
                                boxBreathingPreset[2] = ((strength / 16) * 3.34);
                                boxBreathingPreset[3] = ((strength / 16) * 3.34);
                                strength > 30? equalDuration = 5: equalDuration = ((strength / 16) * 3.34);
                            }, 1000);
                            txtIndicator.innerHTML = "Hold";
                        }
                    })
                    .to(".breath-anim", {
                        'background-color': lightColor,
                        ease: ease,
                        yoyo: true,
                        duration: Hold2,
                        onComplete: () => {
                            txtIndicator.innerHTML = "Well Done"
                        }
                    })
            }


            // 




        </script>